<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>thants</title>
</head>

<body>
    {{#if currentUser}}
    <div class="main">
        {{> menuleft}}
        <div class="content">
            {{> status}}
            {{#if partyTime}}
                {{> party}}
            {{/if}}
            {{#if managingUsers}}
                {{> usermanager}}
            {{/if}}
            {{#if uploadingAvatar}}
                {{> avatarupload}}
            {{/if}}
            {{> header}}
            {{> messages}}
            {{> inputarea}}
        </div>
    </div>
    {{/if}}
    {{#unless currentUser}}
        {{> loginscreen}}
    {{/unless}}
</body>


<template name="loginscreen">
    <div class="loginscreen">
        {{#unless registering}}
            {{> login}}
        {{/unless}}
        {{#if registering}}
            {{> register}}
        {{/if}}
    </div>
</template>

<template name="login">
<div class="login">
    <input autofocus tabindex="1" type="text" id="loginUsername" name="loginUsername" placeholder="username">
    <input type="password" id="loginPassword" name="loginPassword" placeholder="password">
    <div class="loginButton">Login</div>
    <div>or</div>
    <div class="registerswitch">Register</div>
</div>
</template>

<template name="register">
<div class="register">
    <input autofocus tabindex="1" type="text" id="registerUsername" name="registerUsername" placeholder="username">
    <input type="password" id="registerPassword" name="registerPassword" placeholder="password">
    <input type="password" id="registerPasswordConfirm" name="registerPasswordConfirm" placeholder="confirm password">
    <div class="registerButton">Register</div>
    <div>or</div>
    <div class="loginswitch">Back to login</div>
</div>
</template>

<template name="menuleft">
    <div class="menuleft">
        {{#each channelList}}
            <div class="{{activeChannel}}" data-channel="{{this}}">#{{this}}</div>
        {{/each}}
    </div>
</template>

<template name="header">
    <div class="header">
    {{#if inChannel}}
        <span>#{{channelName}}</span><span>&nbsp;[{{channelCount}}]</span><span> &nbsp; {{channelTopic}}</span><span> &nbsp; {{channelWho}}</span>
    {{/if}}
    </div>
</template>

<template name="messages">
    <div class="message-container">
        {{#each channelMessages}}
            {{> message}}
        {{/each}}
    </div>
</template>

<template name="message">
<div class="message pre-render" data-user="{{user}}" data-time="{{formatTimestamp}}">
    <div class="avatar-wrapper">
        <div class="avatar" style="background-image:url({{avatar}});">
        </div>
    </div>
    <div class="message-wrapper">
        <div class="message-header">
            <span class="{{userClass}}">{{user}}</span>
            <span class="info">
                <span class="time">({{formatTime}})</span>
            </span>
        </div>
        <div class="message-content">
            {{{formatContent}}}
        </div>
    </div>
</div>
</template>

<template name="inputarea">
<div class="inputarea">
    <textarea autofocus dir="auto" name="msg" class="input-message" tabindex="1"></textarea>
    <i class="send fa fa-paper-plane-o fa-lg" title="Send Message"></i>
</div>
</template>

<template name="avatarupload">
<div id="dropzone" class="dropzone">
    Drop avatar here (PNG less than 500kb)
</div>
</template>

<template name="usermanager">
<div id="usermanager" class="usermanager">
    <h5>Manage users</h5>
    {{#each userList}}
        {{> usermanageruser}}
    {{/each}}
</div>
</template>

<template name="usermanageruser">
<div>
    {{this.username}}
</div>
</template>

<template name="party">
<video autoplay="" loop="" id="bgvid" style="position: absolute;right: 0;top: 0;width: 100%;height: auto;z-index: -100;background-size: cover;max-height: 100%;">
        <source src="https://loli.dance/illya.webm" type="video/webm">
</video>
</template>